{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "customManagers": [
    {
      "customType": "regex",
      "description": "Process metadata.json versions",
      "fileMatch": [
        "apps/.+/metadata\\.json$"
      ],
      "matchStrings": [
        "(\"renovate::dataSource\":\\s*\"(?<datasource>[^\"]+)\",)?\\s*(\"renovate::depName\":\\s*\"(?<depName>[^\"]+)\",)?\\s*(\"renovate::packageName\":\\s*\"(?<packageName>[^\"]+)\",)?\\s*(\"renovate::versioning\":\\s*\"(?<versioning>[^\"]+)\",)?\\s*\"version\":\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "extractVersionTemplate": "^[^\\d]*(?<version>(?:\\d\\.)+\\d).*$",
      "datasourceTemplate": "{{#if datasource}}{{{datasource}}}{{else}}docker{{/if}}",
      "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver-coerced{{/if}}"
    }, {
      "customType": "regex",
      "description": "Process metadata.yaml versions",
      "fileMatch": [
        "apps/.+/metadata\\.yaml$"
      ],
      "matchStrings": [
        "(renovate-dataSource:\\s*\"(?<datasource>[^\"]+)\")?\\s*(renovate-depName:\\s*\"(?<depName>[^\"]+)\")?\\s*(renovate-packageName:\\s*\"(?<packageName>[^\"]+)\")?\\s*(renovate-versioning:\\s*#(?<versioning>[^#]+)#)?\\s*version: \"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "{{#if datasource}}{{{datasource}}}{{else}}docker{{/if}}",
      "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver-coerced{{/if}}"
    }, {
      "customType": "regex",
      "description": "Process renovate comments",
      "fileMatch": [
        ".github/workflows/.*\\.ya?ml$"
      ],
      "matchStrings": [
        "renovate:\\s*(datasource=(?<datasource>[^\\s]+)\\s*)?(depName=(?<depName>[^\\s]+)\\s*)?(versioning=(?<versioning>[^\\s]+)\\s*)?[^:]*:\\s*(?<currentValue>v?[0-9.]+)"
      ],
      "datasourceTemplate": "{{#if datasource}}{{{datasource}}}{{else}}docker{{/if}}",
      "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver-coerced{{/if}}"
    }
  ]
}
